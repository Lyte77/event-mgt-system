{% extends 'base.html' %} 
{% block content %}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#ff5500" fill-opacity="1" d="M0,256L120,234.7C240,213,480,171,720,144C960,117,1200,107,1320,101.3L1440,96L1440,0L1320,0C1200,0,960,0,720,0C480,0,240,0,120,0L0,0Z"></path></svg>

<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Create New Event</h1>
    <p class="text-gray-600 mt-2">
      Fill in the details below to create your event
    </p>
  </div>

  <div
    class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"
  >
    <div class="px-6 py-5 border-b border-gray-200">
      <h2 class="text-xl font-semibold text-gray-800">Event Information</h2>
    </div>
    <form action="" method="post" enctype="multipart/form-data" >
      {% csrf_token %}
      <div class="md:col-span-2">
        <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
          >Event Title</label
        >

        {{ form.title }}
      </div>
      <div class="md:col-span-2">
        <label
          for="description"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Description</label
        >

        {{ form.description }}
      </div>



      <div class="flex items-center justify-center w-full">
  <label for="banner" class="flex flex-col items-center justify-center w-full h-48 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 border-gray-300">
      <div class="flex flex-col items-center justify-center pt-5 pb-6">
          <svg class="w-8 h-8 mb-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M7 16V4h10v12m-5 4h.01M12 12a4 4 0 100-8 4 4 0 000 8z"/>
          </svg>
          <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">{{ form.event_image }}</p>
          <p class="text-xs text-gray-500">PNG, JPG up to 5MB</p>
      </div>
            
       {% if form.event_image.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.event_image.errors.0 }}</p>
        {% endif %}
  </label>
</div>

        <div class="md:col-span-2">
                <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
                >Venue</label
                >

                {{ form.venue  }}
      </div>
        <div class="md:col-span-2">
                <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
                >Date & Time</label
                >

                {{ form.start_time  }}
      </div>

      <div class="md:col-span-2">
                <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
                >Capacity</label
                >

                {{ form.capacity  }}
      </div>

      <h3 class="mt-6 mb-2 text-lg font-semibold">Ticket Types</h3>

  <!-- Management form (required!) -->
  {{ formset.management_form }}

  <!-- container where ticket forms live -->
  <div id="ticket-forms-container" class="space-y-4">
    {% for form in formset %}
      <div class="ticket-form border rounded p-4 relative" data-form-index="{{ forloop.counter0 }}">
        <!-- Render fields individually for better control -->
        <div class="grid grid-cols-3 gap-4">
          <div>
            <label class="block text-sm">Name</label>
            {{ form.name }}
            {{ form.name.errors }}
          </div>
          <div>
            <label class="block text-sm">Price</label>
            {{ form.price }}
            {{ form.price.errors }}
          </div>
          <div>
            <label class="block text-sm">Quantity</label>
            {{ form.quantity_available }}
            {{ form.quantity_available.errors }}
          </div>
        </div>

        <!-- Delete checkbox (rendered by formset if can_delete=True) -->
        <div class="mt-2">
          {% if form.DELETE %}
            <label class="text-sm text-gray-600">
              {{ form.DELETE }} Remove
            </label>
          {% endif %}
          <!-- Hide default id field if exists (for existing ticket types) -->
          {% if form.id %}
            {{ form.id }}
          {% endif %}
        </div>

        <!-- Visible remove button (JS will check the DELETE input) -->
        <button type="button" class="remove-ticket-btn absolute top-2 right-2 text-red-600">Remove</button>
      </div>
    {% endfor %}
  </div>


      <div class="flex justify-end space-x-4 pt-6 border-t py-10 border-gray-200">
      <button type="submit" class="px-6 py-3 bg-orange-500 text-white font-medium rounded-lg hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition">Create</button>
         <a href="{% url 'events:dashboard' %}" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition">
            Cancel
        </a>

      </div>
    </form>
    
   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#ff5500" fill-opacity="1" d="M0,224L720,160L1440,288L1440,0L720,0L0,0Z"></path></svg>

   
  </div>
</div>

<!-- <form action="" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {{ form.as_p }}
  {{ formset.as_p }}
  <button type="submit">Submit</button>
</form> -->
{% endblock %}
